# RBAC权限系统使用指南

## 系统概述

本系统实现了基于角色（Role-Based Access Control）的权限管理系统，支持页面级权限和按钮级权限的精细控制。

## 默认账户

### 管理员账户
- 用户名：`admin`
- 密码：`123456`
- 权限：拥有所有页面和按钮的完整权限

### 普通用户账户
- 用户名：`user`
- 密码：`123456`
- 权限：仅能访问仪表盘和个人资料页面

## 权限体系

### 页面权限（Page Permissions）
- `page:dashboard` - 仪表盘页面
- `page:user` - 用户管理页面
- `page:role` - 角色管理页面
- `page:menu` - 菜单管理页面
- `page:personal` - 个人资料页面
- `page:system` - 系统管理模块

### 按钮权限（Button Permissions）
#### 用户管理操作
- `user:add` - 新增用户
- `user:edit` - 编辑用户
- `user:delete` - 删除用户
- `user:view` - 查看用户

#### 角色管理操作
- `role:add` - 新增角色
- `role:edit` - 编辑角色
- `role:delete` - 删除角色
- `role:assign` - 分配权限
- `role:view` - 查看角色

#### 菜单管理操作
- `menu:add` - 新增菜单
- `menu:edit` - 编辑菜单
- `menu:delete` - 删除菜单
- `menu:view` - 查看菜单

#### 个人资料操作
- `personal:edit` - 编辑个人资料
- `personal:view` - 查看个人资料

#### 仪表盘操作
- `dashboard:view` - 查看仪表盘

## 功能特性

### 1. 动态菜单
- 根据用户权限动态显示导航菜单
- 无权限的页面不会在侧边栏显示

### 2. 按钮级权限控制
- 页面中的按钮根据权限显示/隐藏
- 无权限时点击按钮会显示错误提示

### 3. 角色管理
- 创建新角色并分配权限
- 编辑现有角色的权限配置
- 使用树形结构直观选择权限

### 4. 用户管理
- 创建用户并分配角色
- 编辑用户信息和角色
- 删除用户（保护admin账户）

### 5. 菜单管理
- 动态添加/编辑/删除菜单项
- 支持多级菜单结构
- 自动生成顺序ID

## 使用说明

### 角色权限配置
1. 以管理员身份登录系统
2. 进入"系统管理 > 角色管理"
3. 点击角色行的"权限"按钮
4. 在树形权限列表中勾选所需的权限
5. 点击"确定"保存配置

### 权限验证
- 页面访问权限：检查侧边栏菜单是否显示
- 按钮操作权限：检查页面中的操作按钮是否可用
- 无权限操作：系统会显示相应的错误提示

### API权限验证
所有API请求都通过JWT token进行身份验证，并在后端进行权限校验，确保安全性。

## 技术实现

### 前端
- Vue 3 + Element Plus
- Pinia状态管理
- Vue Router路由管理
- Axios HTTP客户端

### 后端
- Node.js + Express
- JWT身份验证
- 文件数据库（JSON文件）
- RESTful API设计

### 权限检查机制
```javascript
// 前端权限检查
userStore.hasPermission('user:add')

// 后端权限中间件
if (!req.user.permissions.includes('user:add')) {
  return res.status(403).json({ message: '无权限' });
}
```

## 测试建议

1. 分别使用admin和user账户登录，观察菜单显示差异
2. 在角色管理中修改权限配置，验证权限变更效果
3. 尝试在无权限时访问页面或执行操作，检查错误处理

## 注意事项

- admin用户受保护，不能被删除
- 用户密码在数据库中明文存储（仅用于演示）
- 权限变更需要重新登录才能生效
- 确保所有按钮操作都有相应的权限检查